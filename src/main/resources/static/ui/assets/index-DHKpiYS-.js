import{d as C,a as u,b as m,y as V,l as K,f as x,i as P,e as t,t as r,r as T,u as j,c as v,o as G,g as f,w as z,m as A,F as O,q as U,x as Q,z as S}from"./index-flMhGIYM.js";import{_ as W}from"./Java-AI-BYpq8IxI.js";import{I as D,_ as N}from"./_plugin-vue_export-helper-CzTF9OYf.js";import{L as X}from"./LanguageSwitcher-C2dqn6CM.js";import{u as Y,a as Z,s as I,t as b}from"./templateStore-BzNwvZlh.js";import"./llm-check-CJy4TeZw.js";const ee={key:1,class:"blur-card-content"},oe=C({__name:"BlurCard",props:{content:{},wrapperStyle:{}},emits:["clickCard"],setup(y,{emit:i}){const l=y,n=i,c=()=>{console.log("[BlurCard] handleClick called with content:",l.content),n("clickCard",l.content),console.log("[BlurCard] clickCard event emitted")};return(o,k)=>(m(),u("button",{class:"blur-card",onClick:c,style:V(o.wrapperStyle)},[o.content?.icon?(m(),K(P(D),{key:0,icon:o.content.icon,class:"blur-card-icon"},null,8,["icon"])):x("",!0),o.content?.title||o.content?.description?(m(),u("div",ee,[t("h3",null,r(o.content?.title),1),t("p",null,r(o.content?.description),1)])):x("",!0)],4))}}),te=N(oe,[["__scopeId","data-v-4f09be0d"]]),ae={class:"home-page"},se={class:"welcome-container"},le={class:"header"},ne={class:"header-top"},ce={class:"logo-container"},re={class:"tagline"},ie={class:"main-content"},de={class:"conversation-container"},me={class:"welcome-section"},pe={class:"welcome-title"},ue={class:"welcome-subtitle"},he={class:"input-section"},ge={class:"input-container"},ve=["placeholder"],fe=["disabled"],be={class:"examples-section"},ye={class:"examples-grid"},ke={class:"card-type"},_e=C({name:"HomeIndex",__name:"index",setup(y){const i=Q(),l=Y(),n=T(""),c=T(),{t:o}=j(),k=()=>{const e=Date.now().toString();i.push({name:"direct",params:{id:e}}).then(()=>{console.log("[Home] jump to direct page"+o("common.success"))}).catch(a=>{console.error("[Home] jump to direct page"+o("common.error"),a)})},_=v(()=>[{title:o("home.examples.stockPrice.title"),type:"github",description:o("home.examples.stockPrice.description"),icon:"carbon:chart-line-data",url:o("home.examples.stockPrice.url")},{title:o("home.examples.weather.title"),type:"github",description:o("home.examples.weather.description"),icon:"carbon:location",url:o("home.examples.weather.url")},{title:o("home.examples.imagePdfRecognition.title"),type:"github",description:o("home.examples.imagePdfRecognition.description"),icon:"carbon:document-view",url:o("home.examples.imagePdfRecognition.url")}]),B=v(()=>[{title:o("home.examples.queryplan.title"),type:"github",description:o("home.examples.queryplan.description"),icon:"carbon:plan",url:o("home.examples.queryplan.url")},{title:o("home.examples.ainovel.title"),type:"github",description:o("home.examples.ainovel.description"),icon:"carbon:document-tasks",url:o("home.examples.ainovel.url")},{title:o("home.examples.formInputDemo.title"),type:"github",description:o("home.examples.formInputDemo.description"),icon:"carbon:watson",url:o("home.examples.formInputDemo.url")}]),E=v(()=>[..._.value,...B.value]),R=e=>{console.log("[Home] openGitHubPage called with item:",e),e.url&&window.open(e.url,"_blank")},$=e=>{e.type==="github"?R(e):e.type==="message"?q(e):e.type==="plan-act"&&F(e)};G(()=>{console.log("[Home] onMounted called"),console.log("[Home] taskStore:",l),console.log("[Home] examples:",_),l.markHomeVisited(),console.log("[Home] Home visited marked")});const d=Z(),J=async e=>{try{if(await b.createNewTemplate(e.planType),d.fromJsonString(JSON.stringify(e)),!await d.save())throw new Error("Failed to save plan template");const s={saved:!0,message:"Plan template saved successfully",planId:d.config.planTemplateId||d.selectedTemplate.value?.planTemplateId};return console.log("[Home] Plan template saved successfully:",s.planId),s}catch(a){console.error("[Home] Failed to save the plan to the template library:",a);const s=a instanceof Error?a.message:o("sidebar.saveFailed");throw alert(s),a}},M=()=>{S(()=>{c.value&&(c.value.style.height="auto",c.value.style.height=Math.min(c.value.scrollHeight,200)+"px")})},L=e=>{console.log("[Home] handleKeydown called, key:",e.key),e.key==="Enter"&&e.ctrlKey&&(e.preventDefault(),console.log("[Home] Ctrl+Enter key pressed, calling handleSend"),w())},w=()=>{if(console.log("[Home] handleSend called, userInput:",n.value),!n.value.trim()){console.log("[Home] handleSend aborted - empty input");return}const e=n.value.trim();console.log("[Home] Setting task to store:",e),l.setTask(e),console.log("[Home] Task set to store, current task:",l.currentTask);const a=Date.now().toString();console.log("[Home] Navigating to direct page with chatId:",a),i.push({name:"direct",params:{id:a}}).then(()=>{console.log("[Home] Navigation to direct page completed")}).catch(s=>{console.error("[Home] Navigation error:",s)})},q=e=>{console.log("[Home] selectExample called with example:",e),console.log("[Home] Example prompt:",e.prompt),e.prompt&&l.setTask(e.prompt),console.log("[Home] Task set to store from example, current task:",l.currentTask);const a=Date.now().toString();console.log("[Home] Navigating to direct page with chatId:",a),i.push({name:"direct",params:{id:a}}).then(()=>{console.log("[Home] Navigation to direct page completed (from example)")}).catch(s=>{console.error("[Home] Navigation error (from example):",s)})},F=async e=>{console.log("[Home] selectPlan called with plan:",e);try{const a=await J(e.planJson);console.log("[Home] Plan saved to templates, saveResult:",a);const s=Date.now().toString();await i.push({name:"direct",params:{id:s}}),S(async()=>{await new Promise(p=>setTimeout(p,300)),I.isCollapsed?(await I.toggleSidebar(),console.log("[Home] Sidebar toggled")):console.log("[Home] Sidebar is already open"),await b.loadPlanTemplateList(),console.log("[Home] Template list loaded");const h=a?.planId||e.planJson.planTemplateId,g=d.planTemplateList.value.find(p=>p.planTemplateId===h);if(!g){console.error("[Home] Template not found for ID:",h),console.log("[Home] Available templates:",d.planTemplateList.value.map(p=>p.planTemplateId));return}await b.selectTemplate(g),console.log("[Home] Template selected:",g.title);const H=document.querySelector(".execute-btn");H.disabled?console.error("[Home] Execute button not found or disabled"):(console.log("[Home] Triggering execute button click"),H.click())})}catch(a){console.error("[Home] Error in selectPlan:",a)}};return(e,a)=>(m(),u("div",ae,[t("div",se,[a[2]||(a[2]=t("div",{class:"background-effects"},[t("div",{class:"gradient-orb orb-1"}),t("div",{class:"gradient-orb orb-2"}),t("div",{class:"gradient-orb orb-3"})],-1)),t("header",le,[t("div",ne,[f(X)]),t("div",ce,[a[1]||(a[1]=t("div",{class:"logo"},[t("img",{src:W,alt:"JManus",class:"java-logo"}),t("h1",null,"JManus")],-1)),t("span",re,r(e.$t("home.tagline")),1)])]),t("main",ie,[t("div",de,[t("div",me,[t("h2",pe,r(e.$t("home.welcomeTitle")),1),t("p",ue,r(e.$t("home.welcomeSubtitle")),1),t("button",{class:"direct-button",onClick:k},r(e.$t("home.directButton")),1)]),t("div",he,[t("div",ge,[z(t("textarea",{"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),ref_key:"textareaRef",ref:c,class:"main-input",placeholder:e.$t("home.inputPlaceholder"),onKeydown:L,onInput:M},null,40,ve),[[A,n.value]]),t("button",{class:"send-button",disabled:!n.value.trim(),onClick:w},[f(P(D),{icon:"carbon:send-alt"})],8,fe)])]),t("div",be,[t("div",ye,[(m(!0),u(O,null,U(E.value,s=>(m(),u("div",{key:s.title,class:"card-with-type"},[f(te,{content:s,onClickCard:h=>$(s)},null,8,["content","onClickCard"]),t("span",ke,r(s.type==="github"?"GitHub":s.type),1)]))),128))])])])])])]))}}),Ce=N(_e,[["__scopeId","data-v-84776bf7"]]);export{Ce as default};
//# sourceMappingURL=index-DHKpiYS-.js.map
